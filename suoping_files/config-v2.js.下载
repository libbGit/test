// VIVO样式地址
var _vivoCssUrl = "https://unock.bizhiquan.com/common/css/establish-v2.css";
// OPPO样式地址
var _oppoCssUrl = "https://unock.bizhiquan.com/common/css/establish-oppo.css";
// var _oppoCssUrl = "http://192.168.10.35:8080/common/css/establish-oppo.css";
// qiku样式地址
var _qikuCssUrl = "https://unock.bizhiquan.com/common/css/establish-qiku.css";
// 数据API地址
var _baserUrl = "http://edits.unock.cn/edits";
$('html').hide();
function GetQueryString(name) {
    var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
    var r = window.location.search.substr(1).match(reg);
    if(r != null) return(r[2]);
    return null;
}
var channelno = GetQueryString("channelCode");
/*adhub顶部广告*/
if(channelno=='htc'||channelno=='asus'||channelno=='sugar'||channelno=='koobee'){
    document.write('<script src="//res1.hubcloud.com.cn/sdk/adhub_request_v1.1.js"></script>')
}

/*检测地理位置*/
var str='<script type="text/javascript" src="https://webapi.amap.com/maps?v=1.4.3&key=88004b500247b0c643e39babab3d4726"></script>\n';
$("head").append(str);
/*swiper插件*/
document.write('<link rel="stylesheet" href="https://unock.bizhiquan.com/common/css/swiper.min.css">');
document.write('<script src="https://unock.bizhiquan.com/common/js/swiper.min.js"></script>');

if(channelno=='qiku_magazine'||channelno=='hisense'||channelno=='htc'||channelno=='asus'||channelno=='sugar'||channelno=='cmcc'||channelno=='koobee'||channelno=='lenovo'||channelno=='blackshark') {
    var sc = document.getElementById("sc");
    sc.setAttribute("href", _qikuCssUrl);
}else if(channelno == 'vivo' || channelno == 'vivo_18_9'||channelno=='vivo_dist'||channelno=='vivo_test'||channelno=='vivo_new'){
    var sc = document.getElementById("sc");
    sc.setAttribute("href", _vivoCssUrl);
}else if(channelno == 'oppo_photos_dist'||channelno=='oppo_ac'||channelno=='oppo_ex'||channelno=='osp') {
    var sc = document.getElementById("sc");
    sc.setAttribute("href", _oppoCssUrl);
}
/*百度联盟广告*/
if(channelno=='htc'||channelno=='asus'||channelno=='koobee'||channelno=='hisense'||channelno=='qiku_magazine'||channelno=='sugar'||channelno=='gionee'||channelno=='vivo_test'||channelno=='oppo_test'){
    var str='<script type="text/javascript" src="//cpro.baidustatic.com/cpro/ui/cm.js" async="async" defer="defer" ></script>';
    $('head').append(str);
}
/*vivo oppo 位置*/
if(channelno=='vivo'||channelno=='vivo_18_9'||channelno=='vivo_dist'||channelno=='vivo_new'||channelno=='oppo_ex'||channelno=='oppo_ac'||channelno=='oppo_photos_dist'||channelno=='osp'){
    document.write('<script src="https://pv.sohu.com/cityjson?ie=utf-8"></script>');
}
function initialization() {
    /*内容添加类名*/
    if($("#articleText").find('div').length!='0'){
        $("#articleText div").each(function (index, item) {
            var thsImg=$(item).find('img').length;
            if(thsImg>0){
                $(item).addClass("articleImg");
                $(item).addClass("articleEach");
            }else {
                $(item).addClass("articleP");
                $(item).addClass("articleEach");
            }
        })
    }
    if($("#articleText").find('p').length!='0'){
        $("#articleText p").each(function (index, item) {
            var thsImg=$(item).find('img').length;
            if(thsImg>0){
                $(item).addClass("articleImg");
                $(item).addClass("articleEach");
            }else {
                $(item).addClass("articleP");
                $(item).addClass("articleEach");
            }
            if($(item).find('span').length!='0'){
                $(item).css('font-size','0em')
            }
        })
    }
    /*清除样式*/
    $('body').css('display','block');
    $("#articleText .articleEach").removeAttr("style");
    $("#articleText .articleEach img").removeAttr("style");
    $("#articleText .articleEach span").removeAttr("style");
}
var meizuFullText;
function meizu() {
    var text;
    if($("#articleText div").length>3){
        text=$("#articleText div").is('.articleEach');
    }else {
        text=$("#articleText p").is('.articleEach');
    }
    var full=$('#vivo_full_text').length;
    if (text==false){
        initialization();
    }
    if(full==0){
        var article=$("#articleText").height();
        if (article==0){
            article=1000;
        }
        var windHeight=$(window).height();
        if(windHeight==0){
            windHeight=500;
        }
        if(article>=windHeight){
            $("#articleText").height(windHeight-200+"px");
            var str='<div id="vivo_full_text" class="full_tests">\n' +
                '\t<img src="https://unock.bizhiquan.com/common/img/full_text.png" class="full_text" alt="查看全文">\n' +
                '\t<div>查看全文</div>\n' +
                '\t<img src="https://unock.bizhiquan.com/common/img/text_cone.png" class="vivo_full_text_cone">\n' +
                '</div>';
            $("#articleText").append(str);
            $("#vivo_full_text").click(function () {
                $("#articleText").height('');
                $(this).remove();
            });
        }
    }else {
        clearInterval(meizuFullText);
    }
}
setTimeout(function () {
    $('html').show();
    initialization();
    /*魅族*/
    if(channelno=='meizu_china'||channelno=='huawei_test'||channelno=='samsung'){
        $("#handL").hide();
        if(channelno=='huawei_test'){
            var windHeight=1190;
        }else {
            var windHeight=$(window).height();
            if(windHeight<500){
                windHeight=500;
            }
        }
        var article=$("#articleText").height();
        if(article>=windHeight){
            $("#articleText").height(windHeight-200+"px");
            var str='<div id="vivo_full_text" class="full_tests">\n' +
                '\t<img src="https://unock.bizhiquan.com/common/img/full_text.png" class="full_text" alt="查看全文">\n' +
                '\t<div>查看全文</div>\n' +
                '\t<img src="https://unock.bizhiquan.com/common/img/text_cone.png" class="vivo_full_text_cone">\n' +
                '</div>';
            $("#articleText").append(str);
            $("#vivo_full_text").click(function () {
                $("#articleText").removeAttr('style');
                $(this).remove();
            });
            if(channelno=='huawei_test'){
                $("#relevant").css("margin-top","0");
                $("#vivo_full_text").css("height","6em");
            }
        }
    }
    /*判断魅族是否添加成功查看更多*/
    if(channelno=='meizu_china'){
        meizuFullText=setInterval(meizu(),100);
    }

    /*奇酷*/
    if(channelno=='qiku_magazine'){
        var windHeight=$(window).height();
        if(windHeight<500){
            windHeight=500;
        }
        var article=$("#articleText").height();
        if(article>=windHeight){
            $("#articleText").height(windHeight+"px");
            var str='<div id="qiku_full_text" class="full_tests">\n' +
                '\t<img src="https://unock.bizhiquan.com/common/img/qiku001.png" class="qiku_text" alt="点击展开全部">\n' +
                '\t<div>点击展开全部</div>\n' +
                '\t<img src="https://unock.bizhiquan.com/common/img/qiku_cone.png" class="qiku_text_cone">\n' +
                '</div>';
            $("#articleText").append(str);
            $("#qiku_full_text").click(function () {
                $("#articleText").removeAttr('style');
                $(this).remove();
            });
        }
        /*广告样式*/
        $("#oppoBanner").css('padding','0 0 0.5rem 0');
        if(qikuTime==0){
            var myDate = new Date();
            var h=myDate.getHours();       //获取当前小时数(0-23)
            var m=myDate.getMinutes();     //获取当前分钟数(0-59)
            var navA=$(".navI .nav_a").text();
            var navSplit=navA.split('-');
            var navTime=navSplit[1]+'/'+navSplit[2]+'   '+h+':'+m;
            $(".navI .nav_a").text(navTime);
        }
    }
    /*折叠效果*/
    if(channelno=='gionee'||channelno=='hisense'||channelno=='htc'||channelno=='asus'||channelno=='sugar'||channelno=='cmcc'||channelno=='koobee'||channelno=='lenovo'||channelno=='blackshark'){
        var windHeight=$(window).height();
        if(windHeight<500){
            windHeight=500;
        }
        var article=$("#articleText").height();
        if(article>=windHeight){
            $("#articleText").height(windHeight*2+"px");
            var str='<div id="qiku_full_text" class="full_tests">\n' +
                '\t<img src="https://unock.bizhiquan.com/common/img/qiku001.png" class="qiku_text" alt="点击展开全部">\n' +
                '\t<div>点击展开全部</div>\n' +
                '\t<img src="https://unock.bizhiquan.com/common/img/qiku_cone.png" class="qiku_text_cone">\n' +
                '</div>';
            $("#articleText").append(str);
            $("#qiku_full_text").click(function () {
                $("#articleText").removeAttr('style');
                $(this).remove();
            });
        }
        /*广告样式*/
        $("#oppoBanner").css('padding','0 0 0.5rem 0');
        if(channelno=="qiku_magazine"){
            if(qikuTime==0){
                var myDate = new Date();
                var h=myDate.getHours();       //获取当前小时数(0-23)
                var m=myDate.getMinutes();     //获取当前分钟数(0-59)
                var navA=$(".navI .nav_a").text();
                var navSplit=navA.split('-');
                var navTime=navSplit[1]+'/'+navSplit[2]+'   '+h+':'+m;
                $(".navI .nav_a").text(navTime);
            }
        }
        if(channelno=='blackshark'){
            $("#qiku_full_text").css('margin-bottom','0.01rem')
        }
    }
    /*vivo*/
    if(channelno == 'vivo' || channelno == 'vivo_18_9'||channelno=='vivo_dist'||channelno=='vivo_test'||channelno=='vivo_new'){
        /*var windHeight=1190;
        var article=$("#articleText").height();
        if(article>=windHeight){
            $("#articleText").height(windHeight+"px");
            var str='<div id="vivo_full_text" class="full_tests">\n' +
                '\t<img src="https://unock.bizhiquan.com/common/img/Screen.png" alt="查看全文">\n' +
                '\t<div>查看全文</div>\n' +
                '</div>';
            $("#articleText").append(str);
            $("#vivo_full_text").click(function () {
                $("#articleText").removeAttr('style');
                $(this).remove();
            });
        }*/
        /*广告样式*/
        $("#oppoBanner").css('padding','0 0 0.5rem 0');
        if(channelno=='vivo_test'){
            $(".handI").show();
        }
    }
    /*oppo*/
    /*    if(channelno == 'oppo_photos_dist'||channelno=='oppo_ac'||channelno=='oppo_ex'||channelno=='test'){
            $("#articleText p span").removeAttr("style");
            $("#articleText p").removeAttr("style");
            $("#articleText div").removeAttr("style");
            var text_c= $.trim($("#tex_c").text());
            if(text_c==""||text_c==null||text_c==undefined){
                text_c='壹刻传媒';
            }else {
                if($("#tex_c").text().split(";").length>1){
                    text_c=text_c.split(';')[1];
                }else {
                    text_c='壹刻传媒';
                }
            }

            var nevB=$.trim($(".navI .nav_b").text());
            if(nevB==''||nevB==null){
                nevB='壹刻传媒'
            }else {
                nevB=$.trim($(".navI .nav_b").text());
            }
            $(".navI .nav_a").remove();
            $(".navI .nav_b").remove();
            var str='';
            str+='<span class="nav_a">头图</span>\n' +
                '\t\t\t\t\t<span class="nav_b">/</span>\n' +
                '\t\t\t\t\t<span class="nav_c">'+text_c+'</span>\n' +
                '\t\t\t\t\t<span class="nav_d">图文</span>\n' +
                '\t\t\t\t\t<span class="nav_e">/</span>\n' +
                '\t\t\t\t\t<span class="nav_f">'+nevB+'</span>';
            $(".navI").append(str);
            $("#articleText p").each(function (index, item) {
                var itmValue=$.trim($(item).text());
                var itmImg=$(item).children('img').length;
                var itmA=$(item).children('a').length;
                if(itmValue==""&&itmImg==0&&itmA==0){
                    $(item).remove();
                }
            })
            ///分割线
            str='<hr class="hr_under_line"/>';
            $('.ulul').after(str);
        }*/
},500);

var oppoStyle = '';
var oppoStyleCss='';
/*oppo*/
if(channelno == 'oppo_photos_dist'||channelno=='oppo_ac'||channelno=='oppo_ex'||channelno=='osp'){
    oppoStyle = setInterval(changeOppoStyle, 200); //0.2秒执行一次
   // oppoStyleCss = setInterval(oppoCss, 200); //0.2秒执行一次  看样式是否存在
}
if(channelno=='oppo_test'){
    setTimeout(function () {
        var windHeight=$(window).height();
        if(windHeight<500){
            windHeight=500;
        }
        var article=$("#articleText").height();
        if(article>=windHeight){
            $("#articleText").height(windHeight*2+"px");
            var str='<div id="oppoFull" class="oppoFull">\n' +
                '\t<div>阅读全文</div>\n' +
                '\t<img src="https://unock.bizhiquan.com//common/img/See.png">\n' +
                '</div>';
            $("#articleText").after(str);
            $("#oppoFull").click(function () {
                $("#articleText").removeAttr('style');
                $(this).remove();
            });

        }
        // oppoCss();
        /*分割线*/
        str='<div class="lines">' +
            '<hr class="hr_under_line"/>' +
            '<span>全文结束</span>' +
            '<hr class="hr_under_line" style="float: right"/>' +
            '</div>';
        $('#articleText').after(str);

    },500);
}
/*function oppoCss() {
 /!*   var handl=$('#handL').is(':hidden');
    if(!handl){
        var sc = document.getElementById("sc");
        sc.setAttribute("href", _oppoCssUrl);
    }else {
        clearInterval(oppoStyleCss);
    }*!/
}*/
function changeOppoStyle(){
    var flag = $(".navI .nav_e").html();
    if(typeof(flag) == 'undefined'){
/*        /!*内容添加类名*!/
        if($("#articleText").find('div').length!='0'){
            $("#articleText div").each(function (index, item) {
                var thsImg=$(item).find('img').length;
                if(thsImg>0){
                    $(item).addClass("articleImg");
                    $(item).addClass("articleEach");
                }else {
                    $(item).addClass("articleP");
                    $(item).addClass("articleEach");
                }
            })
        }
        if($("#articleText").find('p').length!='0'){
            $("#articleText p").each(function (index, item) {
                var thsImg=$(item).find('img').length;
                if(thsImg>0){
                    $(item).addClass("articleImg");
                    $(item).addClass("articleEach");
                }else {
                    $(item).addClass("articleP");
                    $(item).addClass("articleEach");
                }
                if($(item).find('span').length!='0'){
                    $(item).css('font-size','0em')
                }
            })
        }
        /!*清除样式*!/
        $("#articleText .articleEach").removeAttr("style");
        $("#articleText .articleEach img").removeAttr("style");
        $("#articleText .articleEach span").removeAttr("style");*/
        initialization();

        $("#articleText p span").removeAttr("style");
        $("#articleText p").removeAttr("style");
        $("#articleText div").removeAttr("style");
        var text_c= $.trim($("#tex_c").text());
        if(text_c==""||text_c==null||text_c==undefined){
            text_c='视觉中国';
        }else {
            if($("#tex_c").text().split(";").length>1){
                text_c=text_c.split(';')[1];
            }else {
                text_c='视觉中国';
            }
        }

        var nevB=$.trim($(".navI .nav_b").text());
        if(nevB==''||nevB==null){
            nevB='视觉中国'
        }else {
            nevB=$.trim($(".navI .nav_b").text());
        }
        $(".navI .nav_a").remove();
        $(".navI .nav_b").remove();
        var str='';
        str+='<span class="nav_a">头图</span>\n' +
            '\t\t\t\t\t<span class="nav_b">/</span>\n' +
            '\t\t\t\t\t<span class="nav_c">'+text_c+'</span>\n' +
            '\t\t\t\t\t<span class="nav_d">图文</span>\n' +
            '\t\t\t\t\t<span class="nav_e">/</span>\n' +
            '\t\t\t\t\t<span class="nav_f">'+nevB+'</span>';
        $(".navI").append(str);
        $("#articleText p").each(function (index, item) {
            var itmValue=$.trim($(item).text());
            var itmImg=$(item).find('img').length;
            var itmA=$(item).find('a').length;
            if(itmValue==""&&itmImg==0&&itmA==0){
                $(item).remove();
            }
        });
    }else{
        clearInterval(oppoStyle);
    }
}

